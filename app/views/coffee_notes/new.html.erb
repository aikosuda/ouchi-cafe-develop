<div class="container container-padding">
	<div class="row">
		<div class="col-sm-10 col-sm-offset-1 new-post">
			<h2 class="text-center post-review-title">コーヒーノート新規追加</h2>
			<%= form_for(@coffee_note) do |f| %>
			<%= render 'shared/error_messages', object: f.object %>

			<div class="col-md-6">
				<h3>画像</h3>
				<div class="product-img">
					<%= attachment_image_tag @coffee_note, :image, size: '400x300', id: "file-preview",fallback: "no_image.png",size:'400x300', class: "review-show-image" %>
				</div>
				<div class="product-new-form">
					<%= f.attachment_field :image, id: "product_img" %>
				</div>
			</div>

			<div class="col-md-6">
				<div class="form-group" id="star">
					<h4><%= f.label :rate, "総合評価" %></h4>
					<%= f.hidden_field :rate, id: :review_rate %>
				</div>
				<div class="form-group">
					<h4><%= f.label :name, "名称" %></h4>
					<%= f.text_area :name, rows: "2", style: "width: 70%;" %>
				</div>
				<div class="form-group">
					<h4><%= f.label :shop, "購入店" %></h4>
					<%= f.text_area :shop, rows: "2", style: "width: 70%;" %>
				</div>
				<div class="form-group">
					<h4><%= f.label :price, "金額(税抜)" %></h4>
					<%= f.text_area :price, rows: "2", style: "width: 70%;" %>円
				</div>
				<div class="form-group">
					<h4><%= f.label :quontity, "容量／サイズ" %></h4>
					<%= f.text_area :quontity, rows: "2", style: "width: 70%;" %>グラム
				</div>
				<div class="form-group">
					<h4><%= f.label :producing_area, "生産地" %></h4>
					<%= f.text_area :producing_area, rows: "2", style: "width: 70%;" %>
				</div>
				<div class="form-group">
					<h4><%= f.label :condition, "購入形態" %></h4>
					<%= f.select :condition, CoffeeNote.conditions.keys, include_blank: "--選択してください--" %>
				</div>
				<div class="form-group">
					<h4><%= f.label :roasting_degree, "焙煎度" %></h4>
					<%= f.select :roasting_degree, CoffeeNote.roasting_degrees.keys, include_blank: "--選択してください--" %>
				</div>
				<div class="form-group" id="sub-star1">
					<h4><%= f.label :acidity, "酸味" %></h4>
					<%= f.hidden_field :acidity, id: :subreview_rate1 %>
				</div>
				<div class="form-group" id="sub-star2">
					<h4><%= f.label :scent, "香り" %></h4>
					<%= f.hidden_field :scent, id: :rsubeview_rate2 %>
				</div>
				<div class="form-group" id="sub-star3">
					<h4><%= f.label :sweetness, "甘み" %></h4>
					<%= f.hidden_field :sweetness, id: :subreview_rate3 %>
				</div>
				<div class="form-group" id="sub-star4">
					<h4><%= f.label :bitter_taste, "苦味" %></h4>
					<%= f.hidden_field :bitter_taste, id: :subreview_rate4 %>
				</div>
				<div class="form-group" id="sub-star5">
					<h4><%= f.label :rich, "コク" %></h4>
					<%= f.hidden_field :rich, id: :subreview_rate5 %>
				</div>
			</div>

			<div class="col-sm-10 col-sm-offset-1">
				<div class="form-group">
					<h4><%= f.label :comment, "フリーコメント" %></h4>
					<%= f.text_area :comment, rows: "10", style: "width: 100%;" %>
				</div>
				<div class="text-center">
					<%= f.submit "記事作成", class: "btn btn-warning btn-lg" %>
				</div>
			</div>
		<% end %>
	</div>
</div>

<%# 画像をプレビュー表示する %>
<script type="text/javascript">
	$(function() {
	    function readURL(input) {
	        if (input.files && input.files[0]) {
	        var reader = new FileReader();
	        reader.onload = function (e) {
	    		$('#file-preview').attr('src', e.target.result);
	        }
	        reader.readAsDataURL(input.files[0]);
	        }
	    }
	$("#product_img").change(function(){
	    readURL(this);
		});
	});
</script>

<%# 星評価 %>
<script type="text/javascript">
	$('#star').raty({
   		size: 36,
   		starOff:  '<%= asset_path('star-off.png') %>',
        starOn : '<%= asset_path('star-on.png') %>',
        starHalf: '<%= asset_path('star-half.png') %>',
   		scoreName: 'review[rate]', 
   		half: true, 
 	});

 	$('#sub-star1').raty({
   		size: 36,
   		starOff:  '<%= asset_path('star-off.png') %>',
        starOn : '<%= asset_path('star-on.png') %>',
   		scoreName: 'subreview[rate1]', 
   		half: false, 
 	});
 	$('#sub-star2').raty({
   		size: 36,
   		starOff:  '<%= asset_path('star-off.png') %>',
        starOn : '<%= asset_path('star-on.png') %>',
   		scoreName: 'subreview[rate2]', 
   		half: false, 
 	});
 	$('#sub-star3').raty({
   		size: 36,
   		starOff:  '<%= asset_path('star-off.png') %>',
        starOn : '<%= asset_path('star-on.png') %>',
   		scoreName: 'subreview[rate3]', 
   		half: false, 
 	});
 	$('#sub-star4').raty({
   		size: 36,
   		starOff:  '<%= asset_path('star-off.png') %>',
        starOn : '<%= asset_path('star-on.png') %>',
   		scoreName: 'subreview[rate4]', 
   		half: false, 
 	});
 	$('#sub-star5').raty({
   		size: 36,
   		starOff:  '<%= asset_path('star-off.png') %>',
        starOn : '<%= asset_path('star-on.png') %>',
   		scoreName: 'subreview[rate5]', 
   		half: false, 
 	});
</script>